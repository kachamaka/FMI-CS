<!DOCTYPE html>

<head>
	<meta charset="utf-8">
	<title>Пример 1711: Интерактивна 2D сцена</title>

	<script src="suica.min.js"></script>

	<script>
		function main()
		{
			p = new Suica();
			lookAt([0,0,650],[0,0,0],[0,1,0]);
			
			p.gl.canvas.addEventListener('mousedown',mouseDown,false);
			p.gl.canvas.addEventListener('mousemove',mouseMove,false);
			p.gl.canvas.addEventListener('contextmenu',function(e){e.preventDefault();},false);

			for (var i=0; i<100; i++)
			{
				var center = [random(-1500,1500),random(-1000,1000),0];
				var radius = random(10,100);
				var n = Math.round(random(3,8));
				polygon(center,radius,n).custom({
					spin: random(0,2*Math.PI),
					color: [random(0,1),random(0,1),random(0,1)],
					mode: Suica.LINE
				});
			}
		}

		lookX = 0;
		lookY = 0;
		lookS = 1;
		
		function mouseDown(event)
		{
			x = event.clientX;
			y = event.clientY;
		}
		
		function mouseMove(event)
		{
			if (event.buttons==1)
			{
				lookX -= lookS*(event.clientX-x);
				lookY += lookS*(event.clientY-y);
			}

			if (event.buttons==2)
			{
				lookS *= Math.pow(1.01,event.clientY-y);
			}

			lookAt ([lookX,lookY,lookS*650], [lookX,lookY,0], [0,1,0]);
			x = event.clientX;
			y = event.clientY;
		}
	</script>	
</head>

<body onload="main()">
	<noscript>
		Искаме JavaScript, но няма!
	</noscript>
	
	<canvas width="740" height="350" style="border: solid 1px Black;">
		Искаме canvas, но няма!
	</canvas>
</body>
