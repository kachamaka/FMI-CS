<!DOCTYPE html>

<head>
	<meta charset="utf-8">
	<title>Пример 1810: Циферблати</title>

	<script src="suica.min.js"></script>

	<script>
		function main()
		{
			p = new Suica();
			orthographic(-10000,10000);
			lookAt([0,0,100],[0,0,0],[0,1,0]);
			background([0,0,0]);

			p.gl.canvas.addEventListener('mousedown',mouseDown,false);
			p.gl.canvas.addEventListener('mouseup',mouseUp,false);
			p.gl.canvas.addEventListener('mousemove',mouseMove,false);
			
			n = 10;
			for (var i=0; i<n; i++)
			{
				var c = [random(-300,300),random(-150,150),100*i];
				var r = random(30,80);
				spheroid(c,[r,r,20]).custom({color:[0,0.5,1]});
				cone([c[0],c[1],c[2]+20],r/10,r).custom({focus:[0,1,0],light:false,color:[1,1,1],interactive:true});
			}
		}

		var obj = null;

		function mouseDown(event)
		{
			obj = p.objectAtPoint(event.clientX,event.clientY);
		}
		
		function mouseUp(event)
		{
			obj = null;
		}

		function mouseMove(event)
		{
			if (obj)
			{
				var x = event.clientX-event.target.offsetLeft-event.target.offsetWidth/2;
				var y = -(event.clientY-event.target.offsetTop-event.target.offsetHeight/2);
				obj.focus = [x-obj.center[0],y-obj.center[1],0];
			}
		}
	</script>	
</head>

<body onload="main()">
	<noscript>
		Искаме JavaScript, но няма!
	</noscript>
	
	<canvas width="740" height="350" style="border: solid 1px Black;">
		Искаме canvas, но няма!
	</canvas>
</body>
