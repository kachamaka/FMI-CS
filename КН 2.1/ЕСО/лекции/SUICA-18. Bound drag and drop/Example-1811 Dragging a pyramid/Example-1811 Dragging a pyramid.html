<!DOCTYPE html>

<head>
	<meta charset="utf-8">
	<title>Пример 1811: Влачене на пирамида</title>

	<script src="suica.min.js"></script>

	<script>
		function main()
		{
			p = new Suica();
			
			p.gl.canvas.addEventListener('mousedown',mouseDown,false);
			p.gl.canvas.addEventListener('mouseup',mouseUp,false);
			p.gl.canvas.addEventListener('mousemove',mouseMove,false);
			
			py = pyramid([0,0,-15],20,30,6).custom({spin:0,interactive:true});
		}

		var obj = null;

		function mouseDown(event)
		{
			x = event.clientX;
			y = event.clientY;
			obj = p.objectAtPoint(x,y);
		}
		
		function mouseUp(event)
		{
			obj = null;
		}

		function mouseMove(event)
		{
			if (obj)
			{
				var dx = event.clientX-x;
				var dy = event.clientY-y;
				if (Math.abs(dx)>Math.abs(dy))
					obj.spin -= dx/100;
				else
					obj.height -= dy/5;
				if (obj.height<5) obj.height=5;
				if (obj.height>40) obj.height=40;
			}
			x = event.clientX;
			y = event.clientY;
		}
	</script>	
</head>

<body onload="main()">
	<noscript>
		Искаме JavaScript, но няма!
	</noscript>
	
	<canvas width="740" height="350" style="border: solid 1px Black;">
		Искаме canvas, но няма!
	</canvas>
</body>
